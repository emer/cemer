# see Unix section for documentation of switches
# this file is copied directly to .pri on Windows

# for some whacky reason, CONFIG had way too much default stuff, so we init it here:
CONFIG = lex yacc plugin warn_off uic resources qt incremental exceptions rtti stl link_prl thread
# NOTE: nasty on Mac! causes libtool to fail to find libs
#   but it was in the default list on Linux
!macx {
  CONFIG += qt_no_framework
}
# on Unix, if empty, then inc/lib etc. paths are from install
EMERGENT_DIR = $$(EMERGENTDIR)

win32 {
  CONFIG += dll
  QMAKE_CXXFLAGS += /arch:SSE2
#TODO: need to pass in the msvc target, ex Debug or Release (for pathing)
MSVC_TARGET = Debug

  contains( MSVC_TARGET, Debug ) {
    CONFIG += debug
    QMAKE_CXXFLAGS += /RTC1 /GS
  } else { 
    contains( MSVC_TARGET, Release ) {
      CONFIG += release
    } else {
      MSVC_TARGET = Release
      CONFIG += release
      warning("MSVC_TARGET variable should be defined as either Debug or Release; 'Release' has been assumed")
    }
  }
  
  LIB_VER = 
  SYS_PLUGIN_DIR = $$(EMERGENTDIR)/plugins
  CONFIG_PRI = $$(EMERGENTDIR)/plugins/config.pri
  EMERGENT_SYS_DIR = $$(EMERGENTDIR)
  EMERGENT_INC_DIR = $${EMERGENT_DIR}/src
  MAKETA = $$(EMERGENTDIR)/bin/maketa
  
#TODO: add our pdp project depends on Windows, ex ode etc.
#  LIBS +=   
  
} else {


# needed to resolve autools paths
#  prefix = @PL_prefix@
#  exec_prefix = @PL_exec_prefix@
#  bindir = @PL_bindir@
# this will be the prefix path of emergent system directory, if installed
#  datadir = @PL_datadir@
#  includedir = @PL_includedir@
  
# TODO: need to fix the bugs in various issues of configure/sed
  prefix = /usr/local
  bindir = $${prefix}/bin
  datadir = $${prefix}/share
  includedir = $${prefix}/include
    
  CONFIG += @PL_DEBUG@
  CONFIG += @PL_DMEM_COMPILE@
  CONFIG += @PL_TA_NO_GUI@

  LIBS += @PL_LIBS@

# the tacss/pdp version string, for adding to libs and folder (Unix only)
  LIB_VER = @PL_LIB_VER@

  
# the install target for plugins
  SYS_PLUGIN_DIR = ${datadir}/emergent/plugins
  CONFIG_PRI = @abs_srcdir@/config.pri
  
  # now, the modal paths that depend on whether EMERGENTDIR is defined or not
  isEmpty( EMERGENT_DIR ) {
    EMERGENT_SYS_DIR = ${datadir}/emergent
    EMERGENT_INC_DIR = $${includedir}/emergent
    MAKETA = $${bindir}/maketa
  } else {
    EMERGENT_SYS_DIR = ${datadir}/pdp++
    EMERGENT_INC_DIR = $${EMERGENT_DIR}/src
    LIBS += -L$${EMERGENT_DIR}/src/temt/lib/.libs
    LIBS += -L$${EMERGENT_DIR}/src/emergent/lib/.libs
    MAKETA = $${EMERGENT_DIR}/src/temt/maketa/maketa

  }
}

